function TFChartCandlestickRenderer(){}function TFChartAnnotation(){}function TFChartLine(a,b,c){this.lineColor=a,this.points=[b,c],this.bounding_box=TFChartRectMake(Math.min(b.x,c.x),Math.min(b.y,c.y),Math.max(b.x,c.x),Math.max(b.y,c.y))}function TFChartHorizontalRay(a,b){this.lineColor=a,this.point=b}function TFChartVerticalRay(a,b,c){this.lineColor=a,this.point=b,this.direction_down=c||!1}function TFChartPolygon(a,b){this.borderColor=a,this.fillColor=b,this.bounding_box=null,this.points=[]}function log10(a){return Math.log(a)/Math.LN10}function DateTimeAxisFormatter(){this.timeUnitSize={second:1,minute:60,hour:3600,day:86400,month:2592e3,quarter:7776e3,year:525949.2*60*1},this.intervals=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]]}function isNullOrUndefined(a){return"undefined"==typeof a||null==a}function TFChartRange(a,b){this.position=a,this.span=b}function TFChartPoint(a,b){this.x=a,this.y=b}function TFChartPointMake(a,b){return new TFChartPoint(a,b)}function TFChartSize(a,b){this.width=a,this.height=b}function TFChartRect(a,b){this.origin=a,this.size=b}function TFChartRectMake(a,b,c,d){return new TFChartRect(new TFChartPoint(a,b),new TFChartSize(c,d))}function setCanvasSize(a,b,c){var d=document.getElementById(a);d.width=b,d.height=c}function TFChartWindow(a,b,c){this.origin=a,this.width=b,this.space_right=c}function TFChart(a,b,c){var d={theme:{backgroundColor:"#FFFFFF",axisColor:"#888888",gridColor:"#EEEEEE",crosshairTextColor:"#FFFFFF",crosshairBackground:"#555555",crosshairColor:"#999999"},min_data_points:15,max_data_points:500,space_right:8};this.options=$.extend({},d,c||{}),this.options.theme=$.extend({},d.theme,this.options.theme||{}),b.setOptions(this.options),this.x_axis={formatter:new DateTimeAxisFormatter,padding:70,data_padding:0,range:new TFChartRange(0,0)},this.y_axis={formatter:new LinearAxisFormatter(4),padding:30,data_padding:20,range:new TFChartRange(0,0)},this.renderer=b,this.viewable_range=new TFChartRange(0,0),this.data=[],this.visible_data=[],this.annotations=[],this.data_window=new TFChartWindow(0,0,this.options.space_right),this.context=null,this.axis_context=null,this.isMouseDown=!1,this.isTouchDown=!1,this.drag_start=0,this.touch_start=0,this.touch_delta=0,this.container=$(a);var e=this.container.width(),f=this.container.height();a.append("<canvas id='chart_canvas' width=\""+e+'px" height="'+f+'px" style="position: absolute; left: 0; top: 0; width=100%; height=100%">Your browser doesn\'t support canvas.</canvas>'),a.append("<canvas id='crosshair_canvas' width=\""+e+'px" height="'+f+'px" style="position: absolute; left: 0; top: 0; width=100%; height=100%"></canvas>');var g=document.getElementById("chart_canvas");g.getContext&&(this.context=g.getContext("2d")),this.chart_canvas=$("canvas#chart_canvas"),this.crosshair_canvas=$("canvas#crosshair_canvas");var h=document.getElementById("crosshair_canvas");this.crosshair_canvas.css("cursor","crosshair"),h.getContext&&(this.axis_context=h.getContext("2d"),h.onmousedown=$.proxy(this.onMouseDown,this),h.onmouseup=$.proxy(this.onMouseUp,this),h.onmousemove=$.proxy(this.onMouseMove,this),h.onmouseout=$.proxy(this.onMouseOut,this),h.addEventListener?(h.addEventListener("mousewheel",$.proxy(this.onMouseWheelScroll,this),!1),h.addEventListener("DOMMouseScroll",$.proxy(this.onMouseWheelScroll,this),!1),h.addEventListener("touchstart",$.proxy(this.onTouchDown,this),!1),h.addEventListener("touchend",$.proxy(this.onTouchUp,this),!1),h.addEventListener("touchmove",$.proxy(this.onTouchMove,this),!1)):h.attachEvent("onmousewheel",$.proxy(this.onMouseWheelScroll,this))),new ResizeSensor(this.container,$.proxy(this.onResize,this));var i=this._drawableArea();this.data_window=new TFChartWindow(0,i.size.width,this.options.space_right),this.redraw()}function roundToDP(a,b){var c=Math.pow(10,b),d=a*c;return d=Math.round(d),d/c}function log10(a){return Math.log(a)/Math.LN10}function LinearAxisFormatter(a){this.dp=a}function TFChartLineRenderer(){}!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("moment")},{moment:2}],2:[function(a,b,c){(function(c){function d(a,b){return function(c){return k(a.call(this,c),b)}}function e(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function f(){}function g(a){w(a),i(this,a)}function h(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._input=a,this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&da.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ma[a]||Na[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(a){var b,d;if(0===a.indexOf("week"))b=7,d="day";else{if(0!==a.indexOf("month"))return;b=12,d="month"}da[a]=function(e,f){var g,h,i=da.fn._lang[a],j=[];if("number"==typeof e&&(f=e,e=c),h=function(a){var b=da().utc().set(d,a);return i.call(da.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;b>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ia]<0||a._a[ia]>11?ia:a._a[ja]<1||a._a[ja]>t(a._a[ha],a._a[ia])?ja:a._a[ka]<0||a._a[ka]>23?ka:a._a[la]<0||a._a[la]>59?la:a._a[ma]<0||a._a[ma]>59?ma:a._a[na]<0||a._a[na]>999?na:-1,a._pf._overflowDayOfYear&&(ha>b||b>ja)&&(b=ja),a._pf.overflow=b)}function x(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function y(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function z(a){return a?a.toLowerCase().replace("_","-"):a}function A(a,b){return b.abbr=a,oa[a]||(oa[a]=new f),oa[a].set(b),oa[a]}function B(a){delete oa[a]}function C(b){var c,d,e,f,g=0,h=function(b){if(!oa[b]&&pa)try{a("./lang/"+b)}catch(c){}return oa[b]};if(!b)return da.fn._lang;if(!m(b)){if(d=h(b))return d;b=[b]}for(;g<b.length;){for(f=z(b[g]).split("-"),c=f.length,e=z(b[g+1]),e=e?e.split("-"):null;c>0;){if(d=h(f.slice(0,c).join("-")))return d;if(e&&e.length>=c&&o(f,e,!0)>=c-1)break;c--}g++}return da.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(ta);for(b=0,c=d.length;c>b;b++)Ra[d[b]]?d[b]=Ra[d[b]]:d[b]=D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Oa[b]||(Oa[b]=E(b)),Oa[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(ua.lastIndex=0;d>=0&&ua.test(a);)a=a.replace(ua,c),ua.lastIndex=0,d-=1;return a}function H(a,b){var c;switch(a){case"DDDD":return xa;case"YYYY":case"GGGG":case"gggg":return ya;case"YYYYY":case"GGGGG":case"ggggg":return za;case"S":case"SS":case"SSS":case"DDD":return wa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ba;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Ea;case"Z":case"ZZ":return Ca;case"T":return Da;case"SSSS":return Aa;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return va;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){var b=(Ca.exec(a)||[])[0],c=(b+"").match(Ja)||["-",0,0],d=+(60*c[1])+s(c[2]);return"+"===c[0]?-d:d}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ia]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[ia]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ja]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ha]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":e[ha]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[ka]=s(b);break;case"m":case"mm":e[la]=s(b);break;case"s":case"ss":e[ma]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[na]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[ja]&&null==a._a[ia]&&(f=function(b){return b?b.length<3?parseInt(b,10)>68?"19"+b:"20"+b:b:null==a._a[ha]?da().weekYear():a._a[ha]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ha]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ha]?d[ha]:a._a[ha],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[ia]=c.getUTCMonth(),a._a[ja]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[ka]+=s((a._tzm||0)/60),l[la]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(ta)||[],b=0;b<d.length;b++)e=d[b],c=(H(e,a).exec(h)||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ra[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[ka]<12&&(a._a[ka]+=12),a._isPm===!1&&12===a._a[ka]&&(a._a[ka]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=i({},a),x(b),b._f=a._f[e],N(b),y(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function R(a){var b,c=a._i,d=Fa.exec(c);if(d){for(a._pf.iso=!0,b=4;b>0;b--)if(d[b]){a._f=Ha[b-1]+(d[6]||" ");break}for(b=0;4>b;b++)if(Ia[b][1].exec(c)){a._f+=Ia[b][0];break}Ca.exec(c)&&(a._f+="Z"),N(a)}else a._d=new Date(c)}function S(a){var b=a._i,d=qa.exec(b);b===c?a._d=new Date:d?a._d=new Date(+d[1]):"string"==typeof b?R(a):m(b)?(a._a=b.slice(0),K(a)):n(b)?a._d=new Date(+b):"object"==typeof b?L(a):a._d=new Date(b)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ga(Math.abs(a)/1e3),e=ga(d/60),f=ga(e/60),g=ga(f/24),h=ga(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ga(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=da(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=new Date(Date.UTC(a,0)).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return"undefined"==typeof a._pf&&x(a),null===b?da.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),da.isMoment(b)?(a=i({},b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new g(a))}function _(a,b){da.fn[a]=da.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),da.updateOffset(this),this):this._d["get"+c+b]()}}function aa(a){da.duration.fn[a]=function(){return this._data[a]}}function ba(a,b){da.duration.fn["as"+a]=function(){return+this/b}}function ca(a){var b=!1,c=da;"undefined"==typeof ender&&(a?this.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)}:this.moment=da)}for(var da,ea,fa="2.4.0",ga=Math.round,ha=0,ia=1,ja=2,ka=3,la=4,ma=5,na=6,oa={},pa="undefined"!=typeof b&&b.exports,qa=/^\/?Date\((\-?\d+)/i,ra=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,sa=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ta=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ua=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,va=/\d\d?/,wa=/\d{1,3}/,xa=/\d{3}/,ya=/\d{1,4}/,za=/[+\-]?\d{1,6}/,Aa=/\d+/,Ba=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ca=/Z|[\+\-]\d\d:?\d\d/i,Da=/T/i,Ea=/[\+\-]?\d+(\.\d{1,3})?/,Fa=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Ga="YYYY-MM-DDTHH:mm:ssZ",Ha=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ia=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ja=/([\+\-]|\d\d)/gi,Ka="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),La={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ma={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Na={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Oa={},Pa="DDD w W M D d".split(" "),Qa="M D H h m s w W".split(" "),Ra={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Sa=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Pa.length;)ea=Pa.pop(),Ra[ea+"o"]=e(Ra[ea],ea);for(;Qa.length;)ea=Qa.pop(),Ra[ea+ea]=d(Ra[ea],2);for(Ra.DDDD=d(Ra.DDD,3),i(f.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=da.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),da=function(a,b,d,e){return"boolean"==typeof d&&(e=d,d=c),$({_i:a,_f:b,_l:d,_strict:e,_isUTC:!1})},da.utc=function(a,b,d,e){var f;return"boolean"==typeof d&&(e=d,d=c),f=$({_useUTC:!0,_isUTC:!0,_l:d,_i:a,_f:b,_strict:e}).utc()},da.unix=function(a){return da(1e3*a)},da.duration=function(a,b){var c,d,e,f=da.isDuration(a),g="number"==typeof a,i=f?a._input:g?{}:a,j=null;return g?b?i[b]=a:i.milliseconds=a:(j=ra.exec(a))?(c="-"===j[1]?-1:1,i={y:0,d:s(j[ja])*c,h:s(j[ka])*c,m:s(j[la])*c,s:s(j[ma])*c,ms:s(j[na])*c}):(j=sa.exec(a))&&(c="-"===j[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},i={y:e(j[2]),M:e(j[3]),d:e(j[4]),h:e(j[5]),m:e(j[6]),s:e(j[7]),w:e(j[8])}),d=new h(i),f&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},da.version=fa,da.defaultFormat=Ga,da.updateOffset=function(){},da.lang=function(a,b){var c;return a?(b?A(z(a),b):null===b?(B(a),a="en"):oa[a]||C(a),c=da.duration.fn._lang=da.fn._lang=C(a),c._abbr):da.fn._lang._abbr},da.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},da.isMoment=function(a){return a instanceof g},da.isDuration=function(a){return a instanceof h},ea=Sa.length-1;ea>=0;--ea)r(Sa[ea]);for(da.normalizeUnits=function(a){return p(a)},da.invalid=function(a){var b=da.utc(NaN);return null!=a?i(b._pf,a):b._pf.userInvalidated=!0,b},da.parseZone=function(a){return da(a).parseZone()},i(da.fn=g.prototype,{clone:function(){return da(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return F(da(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return y(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?da.utc(this._a):da(this._a)).toArray())>0:!1},parsingFlags:function(){return i({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||da.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?da(a).zone(this._offset||0):da(a).local(),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-da(this).startOf("month")-(f-da(f).startOf("month")))/d,e-=6e4*(this.zone()-da(this).startOf("month").zone()-(f.zone()-da(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return da.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(da(),a)},calendar:function(){var a=this.diff(da().zone(this.zone()).startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),da.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+da(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+da(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+da(a).startOf(b)},min:function(a){return a=da.apply(null,arguments),this>a?this:a},max:function(a){return a=da.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,da.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?da(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ga((da(this).startOf("day")-da(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(a){return a===c?this._lang:(this._lang=C(a),this)}}),ea=0;ea<Ka.length;ea++)_(Ka[ea].toLowerCase().replace(/s$/,""),Ka[ea]);_("year","FullYear"),da.fn.days=da.fn.day,da.fn.months=da.fn.month,da.fn.weeks=da.fn.week,da.fn.isoWeeks=da.fn.isoWeek,da.fn.toJSON=da.fn.toISOString,i(da.duration.fn=h.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=da.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=da.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:da.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ea in La)La.hasOwnProperty(ea)&&(ba(ea,La[ea]),aa(ea.toLowerCase()));ba("Weeks",6048e5),da.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},da.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),pa?(b.exports=da,ca(!0)):"function"==typeof define&&define.amd?define("moment",function(a,b,d){return d.config().noGlobal!==!0&&ca(d.config().noGlobal===c),da}):ca()}).call(this)},{}]},{},[1]),function(){var a=this.ElementQueries=function(){function b(a){a||(a=document.documentElement);var b=getComputedStyle(a,"fontSize");return parseFloat(b)||16}function c(a,c){var d=c.replace(/[0-9]*/,"");switch(c=parseFloat(c),d){case"px":return c;case"em":return c*b(a);case"rem":return c*b();case"vw":return c*document.documentElement.clientWidth/100;case"vh":return c*document.documentElement.clientHeight/100;case"vmin":case"vmax":var e=document.documentElement.clientWidth/100,f=document.documentElement.clientHeight/100,g=Math["vmin"===d?"min":"max"];return c*g(e,f);default:return c}}function d(a){this.element=a,this.options={};var b,d,e,f,g,h,i,j=0,k=0;this.addOption=function(a){var b=[a.mode,a.property,a.value].join(",");this.options[b]=a};var l=["min-width","min-height","max-width","max-height"];this.call=function(){j=this.element.offsetWidth,k=this.element.offsetHeight,g={};for(b in this.options)this.options.hasOwnProperty(b)&&(d=this.options[b],e=c(this.element,d.value),f="width"==d.property?j:k,i=d.mode+"-"+d.property,h="","min"==d.mode&&f>=e&&(h+=d.value),"max"==d.mode&&e>=f&&(h+=d.value),g[i]||(g[i]=""),h&&-1===(" "+g[i]+" ").indexOf(" "+h+" ")&&(g[i]+=" "+h));for(var a in l)g[l[a]]?this.element.setAttribute(l[a],g[l[a]].substr(1)):this.element.removeAttribute(l[a])}}function e(a,b){a.elementQueriesSetupInformation?a.elementQueriesSetupInformation.addOption(b):(a.elementQueriesSetupInformation=new d(a),a.elementQueriesSetupInformation.addOption(b),a.elementQueriesSensor=new ResizeSensor(a,function(){a.elementQueriesSetupInformation.call()})),a.elementQueriesSetupInformation.call(),this.withTracking&&i.push(a)}function f(a,b,c,d){var f;if(document.querySelectorAll&&(f=document.querySelectorAll.bind(document)),f||"undefined"==typeof $$||(f=$$),f||"undefined"==typeof jQuery||(f=jQuery),!f)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";for(var g=f(a),h=0,i=g.length;i>h;h++)e(g[h],{mode:b,property:c,value:d})}function g(a){var b;for(a=a.replace(/'/g,'"');null!==(b=j.exec(a));)5<b.length&&f(b[1]||b[5],b[2],b[3],b[4])}function h(a){var b="";if(a)if("string"==typeof a)a=a.toLowerCase(),(-1!==a.indexOf("min-width")||-1!==a.indexOf("max-width"))&&g(a);else for(var c=0,d=a.length;d>c;c++)1===a[c].type?(b=a[c].selectorText||a[c].cssText,-1!==b.indexOf("min-height")||-1!==b.indexOf("max-height")?g(b):(-1!==b.indexOf("min-width")||-1!==b.indexOf("max-width"))&&g(b)):4===a[c].type&&h(a[c].cssRules||a[c].rules)}this.withTracking=!1;var i=[],j=/,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/gim;
this.init=function(a){this.withTracking=a;for(var b=0,c=document.styleSheets.length;c>b;b++)try{h(document.styleSheets[b].cssText||document.styleSheets[b].cssRules||document.styleSheets[b].rules)}catch(d){if("SecurityError"!==d.name)throw d}},this.update=function(a){this.withTracking=a,this.init()},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready.";for(var b;b=i.pop();)a.detach(b);i=[]}};a.update=function(b){a.instance.update(b)},a.detach=function(a){a.elementQueriesSetupInformation?(a.elementQueriesSensor.detach(),delete a.elementQueriesSetupInformation,delete a.elementQueriesSensor,console.log("detached")):console.log("detached already",a)},a.withTracking=!1,a.init=function(){a.instance||(a.instance=new a),a.instance.init(a.withTracking)};var b=function(a){if(document.addEventListener&&document.addEventListener("DOMContentLoaded",a,!1),/KHTML|WebKit|iCab/i.test(navigator.userAgent))var b=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(a(),clearInterval(b))},10);window.onload=a};window.addEventListener?window.addEventListener("load",a.init,!1):window.attachEvent("onload",a.init),b(a.init)}(),function(){this.ResizeSensor=function(a,b){function c(){this.q=[],this.add=function(a){this.q.push(a)};var a,b;this.call=function(){for(a=0,b=this.q.length;b>a;a++)this.q[a].call()}}function d(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.style[b]}function e(a,b){if(a.resizedAttached){if(a.resizedAttached)return void a.resizedAttached.add(b)}else a.resizedAttached=new c,a.resizedAttached.add(b);a.resizeSensor=document.createElement("div"),a.resizeSensor.className="resize-sensor";var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",f="position: absolute; left: 0; top: 0;";a.resizeSensor.style.cssText=e,a.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+e+'"><div style="'+f+'"></div></div><div class="resize-sensor-shrink" style="'+e+'"><div style="'+f+' width: 200%; height: 200%"></div></div>',a.appendChild(a.resizeSensor),{fixed:1,absolute:1}[d(a,"position")]||(a.style.position="relative");var g,h,i=a.resizeSensor.childNodes[0],j=i.childNodes[0],k=a.resizeSensor.childNodes[1],l=(k.childNodes[0],function(){j.style.width=i.offsetWidth+10+"px",j.style.height=i.offsetHeight+10+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,k.scrollLeft=k.scrollWidth,k.scrollTop=k.scrollHeight,g=a.offsetWidth,h=a.offsetHeight});l();var m=function(){a.resizedAttached&&a.resizedAttached.call()},n=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)};n(i,"scroll",function(){(a.offsetWidth>g||a.offsetHeight>h)&&m(),l()}),n(k,"scroll",function(){(a.offsetWidth<g||a.offsetHeight<h)&&m(),l()})}if("[object Array]"===Object.prototype.toString.call(a)||"undefined"!=typeof jQuery&&a instanceof jQuery||"undefined"!=typeof Elements&&a instanceof Elements)for(var f=0,g=a.length;g>f;f++)e(a[f],b);else e(a,b);this.detach=function(){ResizeSensor.detach(a)}},this.ResizeSensor.detach=function(a){a.resizeSensor&&(a.removeChild(a.resizeSensor),delete a.resizeSensor,delete a.resizedAttached)}}(),TFChartCandlestickRenderer.prototype.setOptions=function(a){var b={upFillColor:"rgb(215, 84, 66)",upStrokeColor:"rgb(107, 42, 33)",downFillColor:"rgb(107, 165, 131)",downStrokeColor:"rgb(53, 82, 65)",wickColor:"rgb(180, 180, 180)"};this.theme=$.extend({},b,a.theme.candlestick||{})},TFChartCandlestickRenderer.prototype._fillCandle=function(a,b){b?(a.fillStyle=this.theme.downFillColor,a.strokeStyle=this.theme.downStrokeColor):(a.fillStyle=this.theme.upFillColor,a.strokeStyle=this.theme.upStrokeColor),a.fill(),a.stroke()},TFChartCandlestickRenderer.prototype.render=function(a,b){var c=b.context,d=b.pixelValueAtXValue(a[0].timestamp),e=b.pixelValueAtXValue(a[a.length-1].timestamp),f=e-d,g=f/a.length/1.5,h=g/2;self=this,$.each(a,function(a,d){var e=Math.round(b.pixelValueAtYValue(Math.max(d.open,d.close)))+.5,f=Math.round(b.pixelValueAtYValue(Math.min(d.open,d.close)))+.5,i=b.pixelValueAtXValue(d.timestamp);if(i>-h){c.beginPath(),c.rect(Math.round(i-h)+.5,e,g,f-e),self._fillCandle(c,d.close>=d.open),c.strokeStyle=self.theme.wickColor,c.beginPath();var j=Math.round(i)+.5;c.moveTo(j,b.pixelValueAtYValue(d.high)),c.lineTo(j,e),c.moveTo(j,f),c.lineTo(j,b.pixelValueAtYValue(d.low)),c.stroke()}})},TFChartAnnotation.prototype.render=function(a,b){},TFChartLine.prototype=new TFChartAnnotation,TFChartLine.prototype.constructor=TFChartLine,TFChartLine.prototype.parent=TFChartLine.prototype,TFChartLine.prototype.render=function(a,b){if(this.bounding_box.intersectsRect(a)){var c=b.context;c.beginPath(),c.moveTo(b.pixelValueAtXValue(this.points[0].x),b.pixelValueAtYValue(this.points[0].y)),c.lineTo(b.pixelValueAtXValue(this.points[1].x),b.pixelValueAtYValue(this.points[1].y)),c.strokeStyle=this.lineColor,c.stroke()}},TFChartHorizontalRay.prototype=new TFChartAnnotation,TFChartHorizontalRay.prototype.constructor=TFChartHorizontalRay,TFChartHorizontalRay.prototype.parent=TFChartHorizontalRay.prototype,TFChartHorizontalRay.prototype.render=function(a,b){if(this.point.x<=a.origin.x+a.size.width&&this.point.y>=a.origin.y-a.size.height&&this.point.y<=a.origin.y){var c=b.context,d=b._plotArea();c.beginPath();var e=Math.round(b.pixelValueAtYValue(this.point.y))+.5;c.moveTo(b.pixelValueAtXValue(this.point.x),e),c.lineTo(d.origin.x+d.size.width,e),c.strokeStyle=this.lineColor,c.stroke()}},TFChartVerticalRay.prototype=new TFChartAnnotation,TFChartVerticalRay.prototype.constructor=TFChartVerticalRay,TFChartVerticalRay.prototype.parent=TFChartVerticalRay.prototype,TFChartVerticalRay.prototype.render=function(a,b){if(this.point.x<=a.origin.x+a.size.width&&this.point.x>=a.origin.x&&(!this.direction_down&&this.point.y>=a.origin.y-a.size.height||this.direction_down&&this.point.y>=a.origin.y)){var c=b.context,d=b._plotArea();c.beginPath();var e=Math.round(b.pixelValueAtXValue(this.point.x))+.5;c.moveTo(e,b.pixelValueAtYValue(this.point.y)),this.direction_down?c.lineTo(e,d.origin.y+d.size.height):c.lineTo(e,d.origin.y),c.strokeStyle=this.lineColor,c.stroke()}},TFChartPolygon.prototype=new TFChartAnnotation,TFChartPolygon.prototype.constructor=TFChartPolygon,TFChartPolygon.prototype.parent=TFChartPolygon.prototype,TFChartPolygon.prototype.add=function(a){0==this.points.length?this.bounding_box=TFChartRectMake(a.x,a.y,0,0):(this.bounding_box.origin.x=Math.min(this.bounding_box.origin.x,a.x),this.bounding_box.origin.y=Math.min(this.bounding_box.origin.y,a.y),this.bounding_box.size.width=Math.max(this.bounding_box.size.width,a.x-this.bounding_box.origin.x),this.bounding_box.size.height=Math.max(this.bounding_box.size.height,a.y-this.bounding_box.origin.y)),this.points.push(a)},TFChartPolygon.prototype.render=function(a,b){if(this.points.length>0&&this.bounding_box.intersectsRect(a)){var c=b.context;for(c.beginPath(),c.moveTo(Math.round(b.pixelValueAtXValue(this.points[0].x))+.5,Math.round(b.pixelValueAtYValue(this.points[0].y))+.5),i=1;i<this.points.length;i++)c.lineTo(Math.round(b.pixelValueAtXValue(this.points[i].x))+.5,Math.round(b.pixelValueAtYValue(this.points[i].y))+.5);c.closePath(),"undefined"!=typeof this.fillColor&&(c.fillStyle=this.fillColor,c.fill()),"undefined"!=typeof this.borderColor&&(c.strokeStyle=this.borderColor,c.stroke())}else console.log("box doesn;t intersect")},DateTimeAxisFormatter.prototype.calculateAxisTicks=function(a,b){var c=[];if(0==a.range.span)return c;var d=a.range.span/b,e=Math.floor(log10(d)),f=Math.pow(10,e),g=Math.round(d/f+.5),h=g*f,i=0;for(i=0;i<this.intervals.length-1&&!(h<this.intervals[i][0]*this.timeUnitSize[this.intervals[i][1]]);++i);var j=this.intervals[i][0],k=this.intervals[i][1];h=j*this.timeUnitSize[k];for(var l=h*Math.floor(a.range.position/h),m=h*Math.ceil((a.range.position+a.range.span)/h),n=l;;)if(c.push(n),n+=h,n>m)break;return a.tickSize=h,c},DateTimeAxisFormatter.prototype.format=function(a,b,c){if(1==c)return{text:moment(1e3*a).utc().format("YYYY-MM-DD HH:mm:ss"),is_key:!1};var d,e=b.tickSize;d=e<this.timeUnitSize.minute?"HH:mm:ss":e<this.timeUnitSize.day?"HH:mm":e<this.timeUnitSize.month?"D":e<this.timeUnitSize.year?"MMM YYYY":"YYYY";var f=!1;return a%this.timeUnitSize.day==0&&(d="D",f=!0),a%this.timeUnitSize.month==0&&(d="MMM",f=!0),a%this.timeUnitSize.year==0&&(d="YYYY",f=!0),{text:moment(1e3*a).utc().format(d),is_key:f}},TFChartRange.prototype.ratioForSize=function(a){return a/this.span},TFChartPoint.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},TFChartSize.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},TFChartRect.prototype.toString=function(){return"origin: "+this.origin+", size: "+this.size},TFChartRect.prototype.containsPoint=function(a){return a.x<=this.origin.x&&a.x>=this.origin.x+this.size.width&&a.y<=this.origin.y&&a.y>=this.origin.y+this.size.height},TFChartRect.prototype.intersectsRect=function(a){return this.origin.x+this.size.width>=a.origin.x&&this.origin.x<=a.origin.x+a.size.width&&this.origin.y+this.size.height>=a.origin.y&&this.origin.y<=a.origin.y+a.size.height},TFChartWindow.prototype._checkLimits=function(a){this.space_right=Math.min(.5*a.size.width,this.space_right),this.space_right=Math.max(0,this.space_right),this.width=Math.max(this.width,a.size.width),this.origin=Math.min(0,this.origin),this.origin=Math.max(-(this.width-a.size.width),this.origin)},TFChartWindow.prototype.move=function(a,b){this.origin+a<-(this.width-b.size.width)?this.space_right-=a:this.space_right>0&&a>0?this.space_right-=a:this.origin+=a,this._checkLimits(b)},TFChartWindow.prototype.zoom=function(a,b){var c=this.width-b.size.width+this.origin,d=c/this.width;this.origin-=a,this.width=-this.origin+b.size.width+c+a,this.width=Math.max(this.width,b.size.width);var e=(this.width-b.size.width+this.origin)/this.width-d;this.origin-=e*this.width,this._checkLimits(b)},TFChartWindow.prototype.log=function(a){var b=this.width-a.size.width+this.origin;console.log("|-["+roundToDP(-this.origin,2)+"("+roundToDP(-this.origin/this.width*100,2)+"%)]-|XX-["+roundToDP(a.size.width,2)+"("+roundToDP(a.size.width/this.width*100,2)+"%)]-XX|-["+roundToDP(b,2)+"("+roundToDP(b/this.width*100,2)+"%)]-|-["+roundToDP(this.space_right,2)+"]-|")},TFChart.prototype.setData=function(a){this.data=a,this._updateVisible(),this.redraw()},TFChart.prototype.reset=function(){var a=this._drawableArea();this.data_window=new TFChartWindow(0,a.size.width,this.options.space_right),this._updateVisible(),this.redraw()},TFChart.prototype.pixelValueAtXValue=function(a){var b=this._drawableArea(),c=this.x_axis.range.ratioForSize(b.size.width-b.origin.x-this.data_window.space_right);return(a-this.x_axis.range.position)*c+b.origin.x},TFChart.prototype.pixelValueAtYValue=function(a){var b=this._drawableArea(),c=this.y_axis.range.ratioForSize(b.size.height);return b.origin.y+b.size.height-(a-this.y_axis.range.position)*c},TFChart.prototype.valueAtPixelLocation=function(a){var b=this._drawableArea(),c=this.x_axis.range.ratioForSize(b.size.width-b.origin.x-this.data_window.space_right),d=this.y_axis.range.ratioForSize(b.size.height);return TFChartPointMake((a.x-b.origin.x)/c+this.x_axis.range.position,(b.size.height+b.origin.y-a.y)/d+this.y_axis.range.position)},TFChart.prototype.addAnnotation=function(a){this.annotations.push(a),this._drawAnnotations()},TFChart.prototype.redraw=function(){var a=this.chart_canvas.width(),b=this.chart_canvas.height();this.context.clearRect(0,0,a,b),this.axis_context.clearRect(0,0,a,b),this._drawAxis(),this._drawPlot(),this._drawAnnotations()},TFChart.prototype.pan=function(a,b){this.data_window.move(a,this._plotArea()),1!=b&&(this._updateVisible(),this.redraw())},TFChart.prototype.zoom=function(a,b){this.data_window.zoom(a,this._plotArea()),1!=b&&(this._updateVisible(),this.redraw())},TFChart.prototype._chartBounds=function(){if(isNullOrUndefined(this.bounds)){var a=this.valueAtPixelLocation(TFChartPointMake(this.x_axis.data_padding,this.y_axis.data_padding)),b=this.valueAtPixelLocation(TFChartPointMake(Math.round(this.chart_canvas.width()-this.x_axis.padding)+.5-2*this.x_axis.data_padding,Math.round(this.chart_canvas.height()-this.y_axis.padding)+.5-2*this.y_axis.data_padding));this.bounds=new TFChartRectMake(a.x,b.y,b.x-a.x,a.y-b.y)}return this.bounds},TFChart.prototype._drawableArea=function(){if(isNullOrUndefined(this.drawable_area)){var a=Math.round(this.chart_canvas.width()-this.x_axis.padding)+.5-2*this.x_axis.data_padding,b=Math.round(this.chart_canvas.height()-this.y_axis.padding)+.5-2*this.y_axis.data_padding;this.drawable_area=new TFChartRectMake(this.x_axis.data_padding,this.y_axis.data_padding,a,b)}return this.drawable_area},TFChart.prototype._plotArea=function(){if(isNullOrUndefined(this.plot_area)){var a=Math.round(this.chart_canvas.width()-this.x_axis.padding)+.5,b=Math.round(this.chart_canvas.height()-this.y_axis.padding)+.5;this.plot_area=new TFChartRect(new TFChartPoint(0,0),new TFChartSize(a,b))}return this.plot_area},TFChart.prototype._updateVisible=function(){var a=this._drawableArea();this.bounds=null;var b=this.data[this.data.length-1].timestamp-this.data[0].timestamp,c=this.data_window.width/b,d=(a.size.width-a.origin.x-this.data_window.origin)/c+this.data[0].timestamp,e=(a.size.width-this.data_window.space_right)/c;start_x=d-e;var f=-1,g=this.data.length;if($.each(this.data,function(a,b){return-1==f&&b.timestamp>start_x&&(f=a),g>a&&b.timestamp>d?void(g=a):void 0}),this.visible_data=this.data.slice(f,g),this.visible_data.length>0){var h=this.visible_data[0].low,i=this.visible_data[0].high;$.each(this.visible_data,function(a,b){i=Math.max(i,b.high),h=Math.min(h,b.low)}),this.x_axis.range=new TFChartRange(this.visible_data[0].timestamp,d-this.visible_data[0].timestamp),this.y_axis.range=new TFChartRange(h,i-h)}},TFChart.prototype._drawAxis=function(){var a=(this.chart_canvas.width(),this.chart_canvas.height(),this._plotArea());this.context.strokeStyle=this.options.theme.axisColor,this.context.beginPath(),this.context.moveTo(a.origin.x,a.size.height),this.context.lineTo(a.origin.x+a.size.width,a.size.height),this.context.lineTo(a.origin.x+a.size.width,a.origin.y),this.context.stroke();var b=this.y_axis.formatter.calculateAxisTicks(this.y_axis,10);this.context.font="bold 10px Arial";var c=this;$.each(b,function(b,d){var e=Math.round(c.pixelValueAtYValue(d))+.5;if(e<a.size.height+a.origin.y){c.context.strokeStyle=c.options.theme.axisColor,c.context.beginPath(),c.context.moveTo(a.origin.x+a.size.width,e),c.context.lineTo(a.origin.x+a.size.width+5,e),c.context.stroke(),c.context.strokeStyle=c.options.theme.gridColor,c.context.beginPath(),c.context.moveTo(a.origin.x,e),c.context.lineTo(a.origin.x+a.size.width,e),c.context.stroke(),c.context.fillStyle=c.options.theme.axisColor;var f=c.y_axis.formatter.format(d,c.x_axis,!1);1==f.is_key&&(this.context.font="bold 10px Arial");c.context.measureText(f.text);c.context.fillText(f.text,a.origin.x+a.size.width+5,e+2),1==f.is_key&&(this.context.font="10px Arial")}});var d=this.x_axis.formatter.calculateAxisTicks(this.x_axis,15),c=this;$.each(d,function(b,d){var e=Math.round(c.pixelValueAtXValue(d))+.5;if(e<a.size.width+a.origin.x){c.context.strokeStyle=c.options.theme.axisColor,c.context.beginPath(),c.context.moveTo(e,a.origin.y+a.size.height),c.context.lineTo(e,a.origin.y+a.size.height+5),c.context.stroke(),c.context.strokeStyle=c.options.theme.gridColor,c.context.beginPath(),c.context.moveTo(e,a.origin.y),c.context.lineTo(e,a.origin.y+a.size.height),c.context.stroke(),c.context.fillStyle=c.options.theme.axisColor;var f=c.x_axis.formatter.format(d,c.x_axis,!1);1==f.is_key&&(c.context.font="bold 10px Arial");var g=c.context.measureText(f.text);c.context.fillText(f.text,e-g.width/2,a.origin.y+a.size.height+15),1==f.is_key&&(c.context.font="10px Arial")}})},TFChart.prototype._drawPlot=function(){if(this.visible_data.length>0){var a=this._plotArea();this.context.save(),this.context.rect(a.origin.x,a.origin.y,a.size.width,a.size.height),this.context.clip(),this.renderer.render(this.visible_data,this),this.context.restore()}},TFChart.prototype._drawAnnotations=function(){if(this.annotations.length>0){self=this;var a=this._plotArea();this.context.save(),this.context.rect(a.origin.x,a.origin.y,a.size.width,a.size.height),this.context.clip(),a=this._chartBounds(),$.each(this.annotations,function(b,c){c.render(a,self)}),this.context.restore()}},TFChart.prototype._removeCrosshair=function(){var a=$("#crosshair_canvas").width(),b=$("#crosshair_canvas").height();this.axis_context.clearRect(0,0,a,b)},TFChart.prototype._drawCrosshair=function(a){var b=this._plotArea();this.axis_context.save();var c=this.crosshair_canvas.width(),d=this.crosshair_canvas.height();if(this.axis_context.clearRect(0,0,c,d),a.x>=0&&a.x<=b.origin.x+b.size.width&&a.y>=0&&a.y<=b.origin.y+b.size.height){a.x=Math.round(a.x)+.5,a.y=Math.round(a.y)+.5,this.axis_context.setLineDash([4,2]),this.axis_context.strokeStyle=this.options.theme.crosshairColor,this.axis_context.beginPath(),this.axis_context.moveTo(a.x,b.origin.y),this.axis_context.lineTo(a.x,b.size.height+b.origin.y),this.axis_context.stroke(),this.axis_context.beginPath(),this.axis_context.moveTo(b.origin.x,a.y),this.axis_context.lineTo(b.size.width+b.origin.x,a.y),this.axis_context.stroke(),this.axis_context.restore(),this.axis_context.font="10px Arial";var e=this.valueAtPixelLocation(a);this.axis_context.fillStyle=this.options.theme.crosshairBackground,this.axis_context.save();var f=this.y_axis.formatter.format(e.y,this.y_axis,!0),g=this.axis_context.measureText(f.text),h=8;this.axis_context.beginPath(),this.axis_context.moveTo(b.size.width+b.origin.x,a.y),this.axis_context.lineTo(b.size.width+b.origin.x+5,a.y-h),this.axis_context.lineTo(b.size.width+b.origin.x+g.width+10,a.y-h),this.axis_context.lineTo(b.size.width+b.origin.x+g.width+10,a.y+h),this.axis_context.lineTo(b.size.width+b.origin.x+5,a.y+h),this.axis_context.fill(),this.axis_context.fillStyle=this.options.theme.crosshairTextColor,this.axis_context.fillText(f.text,b.size.width+b.origin.x+5,a.y+3),this.axis_context.restore(),this.axis_context.save();var i=this.x_axis.formatter.format(e.x,this.x_axis,!0),g=this.axis_context.measureText(i.text),j=g.width+10;this.axis_context.beginPath(),this.axis_context.moveTo(a.x-j/2,b.size.height+b.origin.y+5),this.axis_context.lineTo(a.x-5,b.size.height+b.origin.y+5),this.axis_context.lineTo(a.x,b.size.height+b.origin.y),this.axis_context.lineTo(a.x+5,b.size.height+b.origin.y+5),this.axis_context.lineTo(a.x+j/2,b.size.height+b.origin.y+5),this.axis_context.lineTo(a.x+j/2,b.size.height+b.origin.y+5+2*h),this.axis_context.lineTo(a.x-j/2,b.size.height+b.origin.y+5+2*h),this.axis_context.closePath(),this.axis_context.fill(),this.axis_context.fillStyle=this.options.theme.crosshairTextColor,this.axis_context.fillText(i.text,a.x-j/2+5,b.size.height+b.origin.y+3+h+5),this.axis_context.restore()}},TFChart.prototype.onResize=function(){var a=this.container.width(),b=this.container.height();setCanvasSize("chart_canvas",a,b),setCanvasSize("crosshair_canvas",a,b),this.plot_area=null,this.drawable_area=null,this.bounds=null,this._updateVisible(),this.redraw()},TFChart.prototype.onMouseWheelScroll=function(a){var b=a?a:window.event,c=a.wheelDeltaX||-a.detail,d=a.wheelDeltaY||-a.detail;if(c&&this.pan(c,!0),d){this._plotArea();this.zoom(d,!0)}return this._updateVisible(),this.redraw(),mouseX=b.pageX-this.crosshair_canvas.offset().left,mouseY=b.pageY-this.crosshair_canvas.offset().top,this._drawCrosshair(TFChartPointMake(mouseX,mouseY)),a.preventDefault(),a.stopPropagation(),!1},TFChart.prototype.onMouseMove=function(a){var b=a?a:window.event;if(mouseX=b.pageX-this.crosshair_canvas.offset().left,mouseY=b.pageY-this.crosshair_canvas.offset().top,this.isMouseDown){var c=(this._plotArea(),-(this.drag_start-mouseX));this.pan(c),this.drag_start=mouseX}return this._drawCrosshair(TFChartPointMake(mouseX,mouseY)),!1},TFChart.prototype.onMouseOut=function(a){this._removeCrosshair(),this.isMouseDown=!1,this.crosshair_canvas.css("cursor","crosshair")},TFChart.prototype.onMouseDown=function(a){var b=a?a:window.event;return mouseX=b.pageX-this.crosshair_canvas.offset().left,mouseY=b.pageY-this.crosshair_canvas.offset().top,this.isMouseDown=!0,this.drag_start=mouseX,this.crosshair_canvas.css("cursor","move"),a.preventDefault(),a.stopPropagation(),!1},TFChart.prototype.onMouseUp=function(a){return this.isMouseDown=!1,this.crosshair_canvas.css("cursor","crosshair"),a.preventDefault(),a.stopPropagation(),!1},TFChart.prototype.onTouchMove=function(a){var b=(a?a:window.event,a.targetTouches[0].pageX-this.crosshair_canvas.offset().left);if(1==a.targetTouches.length){if(this.isTouchDown){var c=(this._plotArea(),-(this.touch_start-b));this.pan(c),this.touch_start=b}}else if(2==a.targetTouches.length){var d=a.targetTouches[1].pageX-this.crosshair_canvas.offset().left;touch_delta=Math.abs(d-b),this.zoom(2*(touch_delta-this.touch_delta)),this.touch_delta=touch_delta,this._updateVisible(),this.redraw()}return a.preventDefault(),a.stopPropagation(),!1},TFChart.prototype.onTouchDown=function(a){a?a:window.event;len=a.targetTouches.length;var b=a.targetTouches[0].pageX-this.crosshair_canvas.offset().left,c=a.targetTouches[0].pageY-this.crosshair_canvas.offset().top;if(this.touch_start=b,this.isTouchDown=!0,1==len)this._drawCrosshair(c);else{var d=a.targetTouches[1].pageX-this.crosshair_canvas.offset().left;this.touch_delta=Math.abs(d-b),this._removeCrosshair()}return a.preventDefault(),a.stopPropagation(),!1},TFChart.prototype.onTouchUp=function(a){return this.isTouchDown=!1,a.preventDefault(),a.stopPropagation(),!1},LinearAxisFormatter.prototype.calculateAxisTicks=function(a,b){var c=[];if(0==a.range.span)return c;for(var d=a.range.span/b,e=Math.floor(log10(d)),f=Math.pow(10,e),g=Math.round(d/f+.5),h=g*f,i=h*Math.floor(a.range.position/h),j=h*Math.ceil((a.range.position+a.range.span)/h),k=i;;)if(c.push(k),k+=h,k>j)break;return c},LinearAxisFormatter.prototype.format=function(a,b,c){return{text:a.toFixed(this.dp),is_yey:!1}},TFChartLineRenderer.prototype.setOptions=function(a){var b={lineColor:"#FF0000"};this.theme=$.extend({},b,a.theme.line||{})},TFChartLineRenderer.prototype.render=function(a,b){var c=b.context;c.strokeStyle=this.theme.lineColor,c.beginPath(),c.moveTo(b.pixelValueAtXValue(a[0].timestamp),b.pixelValueAtYValue(a[0].close)),self=this,$.each(a,function(a,d){a>0&&c.lineTo(b.pixelValueAtXValue(d.timestamp),b.pixelValueAtYValue(d.close))}),c.stroke()};